<?php

add_action( 'widgets_init', 'load_widgets' );

function load_widgets() {
  <% calculators.forEach(calc => { %>
    register_widget( 'acmecorp_<%= calc %>_Widget');
  <% }) %>
}

<% calculators.forEach(calc => { %>
class acmecorp_<%= calc %>_Widget extends WP_Widget {

  public function __construct() {
    parent::__construct(
      '<%= calc %>',
      'LO - <%= calc.replaceAll('_', ' ') %>',
      array( 'description' => 'A Acme Corp Calculator' )
    );
  }

  public function widget( $args, $instance ) {
    include("<%= calc %>/index.html");
  }
}
<% }) %>
